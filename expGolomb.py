class expGolomb:
    def __init__(self, buffer):
        self.offset = 0
        self.buffer = buffer

    def readBits(self, count):
        result = 0
        index = self.offset // 8
        bit_number = self.offset - (index * 8)
        out_bit_number = count - 1
        for _ in range(count):
            if self.buffer[index] << bit_number & 0x80:
                result |= 1 << out_bit_number
            if (bit_number := bit_number + 1) > 7:
                bit_number = 0
                index += 1
            out_bit_number -= 1
        self.offset += count
        return result

    def readUeg(self):
        bitcount = 0

        while True:
            if self.readBits(1) == 0:
                bitcount += 1
            else:
                break

        result = 0
        if bitcount:
            val = self.readBits(bitcount)
            result = (1 << bitcount) - 1 + val

        return result

    def readEg(self):
        value = self.readUeg()
        if value & 0x01:
            return (value + 1) // 2
        else:
            return -(value // 2)


if __name__ == "__main__":
    buffer = b"".join(
        [
            b"\x00\x6E\x22\x20\x82\xBF\x7D\xE5\x37\xFF\x08\xFC",
            b"\xC4\x44\x41\x4D\x05\x31\x10\x81\x09\xAA\x63\x22\xF7\x0E\xDC\x8D",
            b"\x17\x12\xA1\xB0\x99\x2E\x7E\xE1\xB9\xB6\x67\xDF\x4A\x61\x79\x62",
            b"\x87\xC0\xBC\xD8\xD9\xA4\x28\x0D\x38\xC9\x32\x8C\xEA\x02\xD4\x14",
            b"\xA8\x32\x79\x54\x0F\xA0\xB2\x55\x57\x84\xF7\xCE\x4B\xEB\x32\xD9",
            b"\xC5\x3D\x2D\x28\xFF\xDB\x10\x8E\x16\x01\xB4\x71\xDC\xB0\x79\xAD",
            b"\xA5\xE9\x42\x1C\xE0\x43\x62\x44\x55\xF3\xF9\x74\x95\x62\x12\x23",
            b"\xEF\xBD\xB8\x0B\xB1\xC1\xB7\x52\x1F\xB9\x9E\xE9\xFC\x5C\xAB\xFD",
            b"\x1F\x4F\xB4\x59\xDC\x07\x10\x02\x50\xA6\x15\x0B\x4E\x89\x4A\x8A",
            b"\xEA\xA5\x05\xD0\xF6\xD1\xEC\xE5\xF8\xD4\xA4\xE2\x9C\x6D\x8D\xCF",
            b"\xD5\x1D\x79\xC4\x89\xFF\x6D\x22\x13\xB0\xB1\xA6\xF6\x50\x84\xB4",
            b"\x33\x33\xDC\xA2\xA0\xBD\x0D\xF4\x40\x10\xA6\xCF\xC5\x57\x5F\x10",
            b"\x38\xD5\x4B\x04\x8A\x24\xBF\xDD\x0D\x32\x60\xB8\xA3\xBB\x9C\x60",
            b"\x72\xDC\x8C\x9B\xB9\x31\xBF\x96\x88\xD5\xEF\x1A\x93\x5F\x60\xEB",
            b"\x72\xEB\x8F\x55\xCC\x3C\x62\x55\x7A\x61\x31\xD2\x26\x9E\xED\xF9",
            b"\x62\xE6\xA0\xCF\x40\x41\xFA\x46\x9A\xDC\xA4\x23\xFC\x90\x6C\x4A",
            b"\xBF\x5B\x5F\x6B\x79\x03\x2C\x9E\x4D\xAB\xE0\xA8\xEE\xB5\xCE\xD4",
            b"\xF1\x34\x19\x6A\xB8\xF2\xF7\x6F\x03\xB6\x6C\xBA\x90\x6B\x52\x01",
            b"\x9C\x5D\x95\xDA\x71\xFA\xC0\x2C\xFF\x49\x6F\x51\xCB\x0D\x97\x63",
            b"\x3C\x19\xDA\x72\xD2\xA3\x49\xF8\x32\x08\x1F\x42\xCB\x17\xA4\x87",
            b"\x5A\xE3\x8A\x45\x93\x7D\xB4\xCB\xF8\x6B\x84\x41\x55\x3A\xFB\xED",
            b"\xEA\xB2\x28\x83\x82\x50\x98\x9A\x12\x3E\x40\xEC\xC7\x46\x86\xD7",
            b"\x47\x05\xD5\x0E\x6E\xF6\x6E\x84\x66\xD6\xD2\x02\xAC\x8F\x4E\x8E",
            b"\xD9\x68\x5B\x31\x60\x79\xF6\xF3\xDD\x3A\x1F\x26\x64\x62\x42\xD1",
            b"\xA2\xBF\xC8\xBD\xCA\x45\x10\xAC\x87\x5E\xB4\x8C\x34\x91\x86\x03",
            b"\x8F\x6D\x95\x0B\x2F\x63\x01\x2D\xFC\xF3\x59\xFB\x3E\xDF\x62\xED",
            b"\x57\x07\x42\x97\xB6\xD8\xCD\xCB\xF6\x7B\xE4\x53\xE2\xA7\xFB\x2D",
            b"\x16\x35\xBC\xC2\xE4\x66\xE3\x78\x5D\xB2\x67\xD6\x1C\x84\xF4\x76",
            b"\xCE\xC8\xFF\x14\x04\x97\x53\x77\x27\xD1\xE8\xA7\xA3\xAF\xDF\x85",
            b"\xAB\x5D\xEE\x64\xD6\xFF\xDD\xBC\xC8\xF4\x9F\x84\x03\xB0\xB0\xFD",
            b"\xB8\x87\x31\x44\xB2\x20\x81\x8C\xDA\x0F\x86\x69\x82\x17\xDC\x9E",
            b"\xD0\xA2\x48\x01\x6A\x83\x95\x93\xC5\x13\x46\x7E\xF4\x77\x5E\xCC",
            b"\x20\x0F\xC3\x94\x62\xA9\xA9\xD3\xF8\x15\x19\x38\xF9\xCB\xAC\xAC",
            b"\xC8\x07\xD9\x7E\x23\x58\x60\xDB\x0C\xAA\xC2\x74\xA0\x60\x69\x6B",
            b"\xCB\x99\x70\x98\xD2\x06\xF0\x30\xB6\x14\x33\xB5\xFC\xDB\x6D\x90",
            b"\xFB\x79\x40\x73\x26\x16\x18\xB1\xF5\xD9\x1E\x34\xCC\x61\x2C\x62",
            b"\x89\xF2\x4A\x55\xD0\xDF\xB4\x78\x7D\x02\x9B\x96\x25\xBA\x39\x7C",
            b"\x70\x39\x31\xEF\xC1\x17\xCA\x48\xFF\x79\x7A\x7C\xD3\xE4\xC0\x67",
            b"\x02\x94\x79\x82\x59\xBD\x2F\x4F\x81\x28\xB6\x3E\x4F\xD8\x53\x85",
            b"\xB6\xE1\x2A\xFF\x73\x91\xAF\x6D\x94\xE4\x5D\x1D\xFD\x6F\xC2\x0F",
            b"\x62\x44\x03\x0C\x85\x1B\x2F\xCD\x06\xCD\xFE\x3E\x1B\xB6\x62\x98",
            b"\x3F\xBF\x55\x37\x29\x5F\xFE\x11\xB2\xF9\xE2\xDA\x97\xD7\xDE\x4D",
            b"\xAF\x79\x1B\x77\x7C\xDF\x32\x56\x1A\x5D\x19\xE1\x6D\xDA\x52\x70",
            b"\xA3\x5F\x86\x39\xFB\x10\x4D\x5D\x65\xAC\xF1\x08\x88\xA8\xE6\x1B",
            b"\x2B\xF7\x54\x5F\xA7\x48\xC6\x9B\x72\xEA\x87\x26\x69\x6F\xAA\x12",
            b"\xB4\x1F\xA3\xC1\xE8\xAA\xF0\x63\xAC\xA2\x6A\xE4\x6A\x8E\xC2\x4B",
            b"\x40\x74\xAE\xB2\x35\x41\xA5\x7E\x41\xEA\x8E\xB6\x4E\x08\xE9\x9F",
            b"\x20\xA1\x40\xD6\x3E\x14\xFF\xC9\x98\x22\x88\xB4\x88\xDC\x94\x4A",
            b"\xE0\x6A\xB5\x92\xE4\xCB\x42\xB2\x2D\xF3\x7B\x57\xA7\xE2\x44\xDC",
            b"\xBE\xB3\xED\x85\xE7\x37\x82\x88\x77\xB0\xA7\xDA\x20\x60\x76\x62",
            b"\x67\x0D\xE8\x2A\x6F\x77\x9D\x81\xB7\xA3\xC8\x5E\x90\xED\xCD\x8F",
            b"\x19\xCF\xD5\x68\x5D\xE8\x8F\x5D\x59\x44\x08\xD7\x45\xB3\x84\xB4",
            b"\x48\x87\x9F\x3A\x63\x2B\xDC\xEC\x30\x1E\xD9\xAD\x0D\x7F\x70\xB9",
            b"\x2B\xD0\xED\xC9\x84\x30\x12\xFE\x0A\x3B\xA9\x32\xF0\xDD\xFD\x38",
            b"\x69\x0D\xC7\x5B\x94\xA4\xAA\x55\xA8\xEA\x5E\x95\x1D\x6D\xCC\xE3",
            b"\x83\x51\xB7\xAE\x3B\x3F\x42\x90\x05\x05\x05\x46\xD0\xC1\x8D\xFE",
            b"\x7C\xD4\x32\x25\xF9\xAC\xB6\x7C\x70\xA9\x96\x93\x05\x74\x6F\x47",
            b"\xD6\x62\xC7\xE6\x97\xDE\x02\x30\xA7\x30\xF0\x79\x0F\xDD\x72\x68",
            b"\x83\x8B\x4E\x8F\x1A\x20\x3D\x52\x06\x4C\x6A\x0D\x1F\xB7\x11\xD7",
            b"\xB4\x6C\x3A\x50\xE5\x7E\xD7\x43\xB5\x38\x9F\x60\xB5\x3A\x4B\xDB",
            b"\x1A\xE4\xA6\x8D\x7D\xF9\xC1\x77\xCC\x7A\xD1\xD8\x06\xDA\x6E\x12",
            b"\xEB\xF3\x63\xD2\xB0\xC4\x2F\x35\x6A\x84\x92\x7C\x2D\xAD\xF2\x10",
            b"\x84\xFE\xE7\x14\x9B\x23\x17\xB2\x44\x8A\x32\xE6\xA7\xEA\x31\x86",
            b"\xCC\x2F\x57\xA5\x96\x68\x22\x5C\xB4\x2E\xA4\xC4\xAA\x04\xA1\x30",
            b"\x96\xFC\x0E\xCA\x95\xB9\x86\xF8\x12\x91\xEC\xE0\x1E\xDE\x2A\xE4",
            b"\x37\x3E\xD2\x2D\x76\xAC\xB5\xFA\x91\x5F\xB1\x97\x29\x8B\x37\xDA",
            b"\x45\xF2\x45\x2A\xB1\xD4\xE2\xFD\x99\x33\x42\xD2\xBE\x79\x73\x86",
            b"\x14\x99\x32\x53\x0D\xCC\x40\x2B\xC4\xF1\xF4\x61\x53\xD7\xB5\xCB",
            b"\xCC\xC6\x58\x85\x73\x8D\x30\xFD\xDA\x03\x15\x12\x48\x86\xAE\x2E",
            b"\xA7\xF3\xBA\x8B\x0E\xC5\xD3\xBF\x3E\x2C\x25\x64\x39\x03\xF2\x14",
            b"\x9E\x50\x19\x03\x35\x85\xF2\x34\xEB\x3A\xCE\x2F\x05\xDD\x59\xD6",
            b"\x5C\xDB\x90\x1A\xF9\x06\x75\x81\xEC\x0B\xF2\xFF\xF5\xB7\x58\x2B",
            b"\x62\x0A\x56\xE1\x0C\x8F\x98\x10\x72\xC2\x93\x25\x3C\x22\xB0\x71",
            b"\x51\xC3\x27\x4C\xB7\xEF\xF8\xA3\x50\x13\xB3\xD4\xF3\x30\xDD\x81",
            b"\x20\x78\x58\x16\x6B\xE3\xF5\x07\x40\x9A\x85\x6C\x93\xDD\xD7\x6B",
            b"\x97\xE5\xEA\x51\xEC\xBD\x01\x3D\xA7\xA1\xFF\xA3\x85\x53\xE9\x7B",
            b"\x9B\x11\x87\x5D\xA5\x52\x66\x6D\xAB\xAF\xA1\xA6\x99\xE6\x85\xEE",
            b"\xD3\xB6\x9B\xF8\xF1\xF6\xED\x78\x9A\x72\x47\x9F\x13\xF1\xF1\x6C",
            b"\x3E\x56\xBD\x86\xD3\x0E\x15\x8F\x16\x50\xCB\x1C\xEE\x2E\x69\x26",
            b"\xBA\x23\xDD\xB7\x95\x3A\xAC\x1F\xC0\xA1\x7F\x6A\xB9\xF1\x5F\x00",
            b"\x7E\x97\x46\x4C\xE0\xD5\xA4\xB5\x90\x68\x75\x4B\x5A\xE4\x9A\xA8",
            b"\xC0\xED\x1D\x5A\x36\xD5\xF9\xD0\x0C\x46\xB9\x1B\x7A\x24\x78\x72",
            b"\x00\xD5\x9E\xF1\xD2\x00\x40\x1E\x93\x05\xB3\xDB\xD4\xE7\xAE\xF2",
            b"\x0B\x50\x31\x16\x3D\x97\xF6\x87\x57\x53\x40\xAF\x81\xC1\x48\x46",
            b"\xA7\x0D\x67\xB9\xD7\xDE\x5F\x62\x0C\x7B\xA6\xA9\x6E\xE7\xFA\xC9",
            b"\xAD\x5B\xEF\x50\x87\x24\x41\x76\x90\x3F\xEF\x82\xFB\xBA\xC0\xA9",
            b"\x19\x3F\xC8\x4D\x3C\x4D\x47\xFB\x3A\x93\x62\xAA\x1E\x57\x4D\x51",
            b"\xEA\x78\x32\xFD\x0E\x44\xCF\xDA\x1B\x6A\xE3\x8D\xAC\x11\xED\xA0",
            b"\x14\xD3\x4B\x1A\x97\xCB\xFB\xFE\xC1\x6A\x6A\x3F\x75\x3A\x86\x6A",
            b"\x27\xF8\x40\x9E\x2C\x90\x4D\xD5\x92\xA2\x63\xEB\x47\x3F\x09\x88",
            b"\xAC\x18\x66\xE1\xE0\x2B\x97\xFD\x95\x5B\x5B\x3B\xE5\x75\xCC\xD1",
            b"\x80\x46\xCF\x65\x7D\x0C\x5E\x30\x3C\x1B\xC6\xFF\xD2\xCF\xB1\x73",
            b"\xEE\xB1\x91\xC6\x7A\x84\x20\x17\x62\xCD\x48\xB4\x19\xBD\x13\xE3",
            b"\x27\x31\x8A\x15\x60\xEB\x90\xD9\x41\x6A\x70\xE7\x6A\x2D\x02\x3B",
            b"\x53\xA4\x49\xDB\x17\x8C\x46\x73\x2D\x38\x06\xF6\x1C\xA9\xB9\x3F",
            b"\x6E\xE8\xA0\x8F\xED\x9D\x3E\x19\x08\xCE\x79\x05\xFB\x41\x78\xFD",
            b"\x48\x68\xDD\x3E\xD8\x00\x5E\x9B\xE7\x5F\x84\x30\xF0\x00\xB3\x65",
            b"\x66\x46\x5A\x90\xA5\xC3\xC7\xA9\x39\x16\x7B\x9D\x07\x29\xED\x1A",
            b"\x9D\x5D\x8A\x9D\x33\xAA\xA4\x2F\xC5\x95\x62\x1D\x10\x07\x5B\x48",
            b"\x2D\x87\x17\xE0\x11\x34\xA9\x6A\x1B\xE5\xF5\x54\x55\x15\xC6\xE4",
            b"\xE9\x82\x7B\x3A\x11\xD6\x04\x9E\x62\x5D\xA6\xC7\xCB\x05\xFE\x69",
            b"\xB7\xD6\x36\x28\x54\xCE\x58\xE2\xF8\x5F\x78\xF4\xB1\x95\xB1\xFE",
            b"\xF0\xB6\x6F\xE5\xED\x4A\xB1\xD1\x45\xD0\x71\xF9\xA1\xD6\x28\xE0",
            b"\xE7\xA5\x0F\xBC\x47\xEE\x26\x48\xEA\x0D\x40\x29\xF9\x60\x59\xFC",
            b"\x12\x2A\x2F\xE1\xBE\x67\x61\x25\xC8\xE4\x49\xFF\x68\xAC\xA6\x0D",
            b"\x99\xA3\x7C\xA1\x85\xC4\x7C\xE7\xBA\x69\x61\x42\x77\x78\xF9\x2E",
            b"\x59\xD8\xE3\x12\x15\x8B\x58\x8A\x07\xF9\xC7\xEA\xA6\x09\x30\xE2",
            b"\xFB\xF3\xF3\x2E\x84\xDB\xF7\x78\x99\x39\xEA\x22\xA4\x6D\x4D\x94",
            b"\xD6\x5F\xB6\xDD\x9C\x89\x67\xE1\xD5\xF9\xDD\x06\xFD\xD4\x2D\xD8",
            b"\xBB\xB5\xA0\xC7\xC1\x2C\x0B\x11\x3E\x03\xAE\x63\xCA\x22\x68\xAA",
            b"\x64\x5F\xDF\x1C\x1F\xC1\xE8\x0C\xF1\xA8\x9A\x61\x42\xEE\x5B\x45",
            b"\x8E\x7B\x10\xDC\xDA\xCD\x86\x83\x68\xAD\x0B\x6E\xDB\x2D\xBA\xA6",
            b"\x75\xCB\x86\x0D\x91\xAF\x8D\xC7\x1E\x38\xD2\xDA\xF5\x23\xCF\x18",
            b"\xCB\x16\xF6\x83\xCC\xA1\xE1\x71\x8D\x29\x77\x47\x5D\xAA\x22\x05",
            b"\xAA\x7E\x2D\x89\x20\xD0\x15\x44\x85\x64\x56\x5B\x92\x0A\x8A\x82",
            b"\x07\x4F\xA5\x7F\x3D\x90\xEB\x1A\x22\x00\x37\x1F\xA0\xB3\x2C\xF2",
            b"\x05\x81\xB7\x4A\x49\x42\x62\x92\xA9\x28\x54\x80\x21\x6C\x08\xE3",
            b"\x0A\xED\x4A\x5F\x2F\xF4\xCA\xD3\xB2\x46\xA5\x9D\xFA\x0A\xEE\x6B",
            b"\x2B\x56\xC3\xBE\x3D\x68\x2B\x33\xEA\xFD\xDE\x07\x50\xF1\xF9\x65",
            b"\xF1\x29\x52\x95\x02\x2C\xBC\xEC\xDA\xD1\x14\x8B\xC8\x51\x86\x3D",
            b"\x4A\x3F\x6C\x7D\x85\xC1\x91\x2E\x92\x82\xD8\xEC\xB8\x36\x8D\x96",
            b"\xBB\xE3\x02\xF6\xB6\x71\xBB\xFC\xDB\x0E\x56\xF2\xA2\xE9\x4A\xB3",
            b"\x0E\xB4\xFE\x62\x43\x24\x12\x85\xA1\x5D\xE7\x60\xF9\xF0\x7A\xD8",
            b"\xB7\x9E\xAF\x55\x09\x5C\x5B\x9D\x50\x49\x29\xC1\xE5\x88\xDA\x65",
            b"\x44\x06\x67\x51\xC9\xD2\xF2\x59\xED\xD0\xA0\x62\x71\x42\x42\xB2",
            b"\x4D\x24\xE5\xE9\x25\x52\xE3\x60\x0B\x8A\x8C\xC5\xC6\x81\x8D\xFF",
            b"\xF6\x69\xC9\x94\x35\x66\xBB\x0D\x71\x4D\x8F\x53\xEF\x61\xEE\x86",
            b"\x7E\x1B\x53\xC9\xE6\x85\x29\xA1\xF4\x62\xDF\xDB\xEF\x1D\x45\xE4",
            b"\x83\x1F\x28\x78\x12\x75\x44\x95\xEF\x55\xC2\x9E\xD8\x27\x55\xF5",
            b"\xA5\x95\x35\x8B\xF7\x17\x83\x58\xF3\x7F\x06\xB0\xF3\xFB\x9C\x16",
            b"\x6B\x5A\xA2\xC4\xB7\x01\x6C\x09\x25\x07\xE0\x97\x38\x1F\x4C\x42",
            b"\xF2\x9A\x20\xEA\x94\x34\x9B\x01\x8F\xEB\x0B\x78\x92\x89\x49\x9B",
            b"\x33\xDB\x78\x3C\x0F\xF4\xCD\x77\x5D\xF4\x3C\xDE\x54\xFB\x15\xF4",
            b"\x2A\xC3\x3C\xBB\x15\xC4\xEC\x16\x23\x5D\xCC\x2F\xBE\x9F\x9B\xB0",
            b"\xA3\x2C\xCA\x06\x7C\xEE\xC0\x0F\x30\xE2\xD9\xD2\x9B\xEF\x7D\x3F",
            b"\xD4\x49\x80\x04\x5F\x4E\xE3\x46\x71\xE3\xE3\xF6\x76\x4C\x3F\xF6",
            b"\x27\x80",
        ]
    )
    naluInfo = expGolomb(buffer)
    print(naluInfo.readUeg())
    print(naluInfo.readUeg())

